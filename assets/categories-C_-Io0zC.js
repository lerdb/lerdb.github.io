import{_ as U}from"./YunCard.vue_vue_type_script_setup_true_lang-DQdxI44h.js";import{_ as V}from"./YunPostCollapse.vue_vue_type_style_index_0_lang-DemxEpJJ.js";import{d as S,u as j,a as q,i as x,B as A,m as B,ad as E,U as K,l as L,e as c,o as t,F as v,g as f,j as R,t as $,f as i,k as P,c as g,ae as N,w as d,s as p,y as D,H as F,af as T,a6 as H,aa as W,ab as M,r as O,ac as G,a9 as J}from"./app-Cklp_fsg.js";import{_ as Q}from"./YunPageHeader.vue_vue_type_script_setup_true_lang--kxZ6p_R.js";const X={class:"category-list-item inline-flex items-center cursor-pointer"},Z={key:0,"i-ri-folder-add-line":""},I={key:1,style:{color:"var(--va-c-primary)"},"i-ri-folder-reduce-line":""},ee={key:0},te={m:"l-1",font:"serif black"},ne=S({__name:"YunCategory",props:{parentKey:{},category:{},level:{},collapsable:{type:Boolean,default:!0}},setup(a){const m=a,_=j(),l=q(),k=x(()=>{const e=l.query.category||"";return Array.isArray(e)?[e]:e.split("/")}),n=A(m.collapsable),{t:u}=B(),{locale:C}=B();function Y(e){const s=C.value==="zh-CN"?"zh":C.value;return e[`title_${s}`]?e[`title_${s}`]:e.title}const y=A(),{show:r}=E(y);function h(e){_.push({query:{category:e}}),r()}return K(()=>{const e=document.querySelector(".post-collapse-container");e&&(y.value=e)}),(e,s)=>{const b=L("YunCategory",!0),z=L("RouterLink");return t(),c(v,null,[f("li",X,[f("span",{class:"folder-action inline-flex",onClick:s[0]||(s[0]=o=>n.value=!n.value)},[n.value?(t(),c("div",Z)):(t(),c("div",I))]),f("span",{class:"category-name",m:"l-1",onClick:s[1]||(s[1]=o=>h(a.parentKey))},$(a.category.name==="Uncategorized"?i(u)("category.uncategorized"):a.category.name)+" ["+$(a.category.total)+"] ",1)]),n.value?R("v-if",!0):(t(),c("ul",ee,[(t(!0),c(v,null,P(a.category.children.values(),(o,w)=>(t(),c("li",{key:w,class:"post-list-item",m:"l-4"},[i(N)(o)?(t(),g(b,{key:0,"parent-key":a.parentKey?`${a.parentKey}/${o.name}`:o.name,category:o,collapsable:!k.value.includes(o.name)},null,8,["parent-key","category","collapsable"])):(t(),c(v,{key:1},[o.title?(t(),g(z,{key:0,to:o.path||"",class:"inline-flex items-center"},{default:d(()=>[s[2]||(s[2]=f("div",{"i-ri-file-text-line":""},null,-1)),f("span",te,$(Y(o)),1)]),_:2},1032,["to"])):R("v-if",!0)],64))]))),128))]))],64)}}}),ae=S({__name:"YunCategories",props:{categories:{},level:{default:0},collapsable:{type:Boolean,default:!0}},setup(a){const m=q(),_=x(()=>{const l=m.query.category||"";return Array.isArray(l)?[l]:l.split("/")});return(l,k)=>{const n=ne;return t(!0),c(v,null,P(a.categories.values(),u=>(t(),c("ul",{key:u.name,class:"category-list",m:"l-4"},[p(n,{"parent-key":u.name,category:u,level:a.level+1,collapsable:!_.value.includes(u.name)},null,8,["parent-key","category","level","collapsable"])]))),128)}}}),oe={text:"center",class:"yun-text-light",p:"2"},ce=S({__name:"categories",setup(a){const{t:m}=B(),_=D(),l=F(),k=q(),n=x(()=>k.query.category||""),u=T(),C=x(()=>_.postList.filter(r=>r.categories&&n.value!=="Uncategorized"?typeof r.categories=="string"?r.categories===n.value:r.categories.join("/").startsWith(n.value)&&r.categories[0]===n.value.split("/")[0]:!r.categories&&n.value==="Uncategorized"?r.categories===void 0:!1)),Y=H(l);return W([M({"@type":"CollectionPage"})]),(y,r)=>{const h=J,e=Q,s=ae,b=L("RouterView"),z=V,o=U;return t(),c(v,null,[y.$slots["sidebar-child"]?(t(),g(h,{key:0},{default:d(()=>[O(y.$slots,"sidebar-child")]),_:3})):(t(),g(h,{key:1})),p(b,null,{default:d(({Component:w})=>[(t(),g(G(w),null,{"main-header":d(()=>[p(e,{title:i(Y)||i(m)("menu.categories"),icon:i(l).icon||"i-ri-folder-2-line",color:i(l).color},null,8,["title","icon","color"])]),"main-content":d(()=>[f("div",oe,$(i(m)("counter.categories",Array.from(i(u).children).length)),1),p(s,{categories:i(u).children},null,8,["categories"]),p(b)]),"main-nav-before":d(()=>[n.value?(t(),g(o,{key:0,class:"post-collapse-container",m:"t-4",w:"full"},{default:d(()=>[p(e,{title:n.value==="Uncategorized"?i(m)("category.uncategorized"):n.value.split("/").join(" / "),icon:"i-ri-folder-open-line"},null,8,["title"]),p(z,{w:"full",m:"b-4",p:"x-20 lt-sm:x-5",posts:C.value},null,8,["posts"])]),_:1})):R("v-if",!0)]),_:1}))]),_:1})],64)}}});export{ce as default};
