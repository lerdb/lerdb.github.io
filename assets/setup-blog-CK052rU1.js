import{_ as p}from"./ValaxyMain.vue_vue_type_style_index_0_lang-DjtPyN2X.js";import{a as c,c as m,w as a,f as g,o as k,r as l,g as e,h as t,p as h}from"./app-Cklp_fsg.js";import"./YunFooter.vue_vue_type_script_setup_true_lang-DyTMdW8K.js";import"./YunCard.vue_vue_type_script_setup_true_lang-DQdxI44h.js";import"./YunPageHeader.vue_vue_type_script_setup_true_lang--kxZ6p_R.js";import"./index-C7yU5XnD.js";const G={__name:"setup-blog",setup(b,{expose:d}){const i=JSON.parse('{"title":"搭建博客踩的坑","description":"","frontmatter":{"title":"搭建博客踩的坑","date":"2024-05-02T17:00:00.000Z","updated":"2024-05-05T17:00:00.000Z","categories":"博客记录","tags":["Blog","踩坑"]},"headers":[{"level":2,"title":"GitHub Actions 权限","slug":"github-actions-权限","link":"#github-actions-权限","children":[]},{"level":2,"title":"布局覆盖","slug":"布局覆盖","link":"#布局覆盖","children":[]},{"level":2,"title":"其他","slug":"其他","link":"#其他","children":[]}],"relativePath":"pages/posts/setup-blog.md","path":"/home/runner/work/lerdb.github.io/lerdb.github.io/pages/posts/setup-blog.md","lastUpdated":1766036907000}'),o=c(),n=i.frontmatter||{};return o.meta.frontmatter=Object.assign(o.meta.frontmatter||{},i.frontmatter||{}),h("pageData",i),h("valaxy:frontmatter",n),globalThis.$frontmatter=n,d({frontmatter:{title:"搭建博客踩的坑",date:"2024-05-02T17:00:00.000Z",updated:"2024-05-05T17:00:00.000Z",categories:"博客记录",tags:["Blog","踩坑"]}}),(s,r)=>{const u=p;return k(),m(u,{frontmatter:g(n)},{"main-content-md":a(()=>[...r[0]||(r[0]=[e("p",null,"这篇博客用来记录一下我在用 valaxy 和 GitHub Pages 搭建博客时踩过的坑",-1),e("h2",{id:"github-actions-权限",tabindex:"-1"},[t("GitHub Actions 权限 "),e("a",{class:"header-anchor",href:"#github-actions-权限","aria-label":'Permalink to "GitHub Actions 权限"'},"​")],-1),e("p",null,"在第一次提交后触发了 GitHub Actions, 但是 GitHub Actions 并没有新建 gh-pages 分支, 需要手动给 GitHub Actions 加上权限才行",-1),e("div",{class:"language-yml vp-adaptive-theme"},[e("button",{title:"Copy Code",class:"copy"}),e("span",{class:"lang"},"yml"),e("pre",{class:"shiki shiki-themes github-light github-dark has-highlighted vp-code"},[e("code",{"v-pre":""},[e("span",{class:"line"},[e("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"# Sets permissions of the GITHUB_TOKEN to allow deployment to GitHub Pages")]),t(`
`),e("span",{class:"line"},[e("span",{style:{"--shiki-light":"#22863A","--shiki-dark":"#85E89D"}},"permissions"),e("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},":")]),t(`
`),e("span",{class:"line highlighted warning"},[e("span",{style:{"--shiki-light":"#22863A","--shiki-dark":"#85E89D"}},"  contents"),e("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},": "),e("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},"write")]),t(`
`),e("span",{class:"line"},[e("span",{style:{"--shiki-light":"#22863A","--shiki-dark":"#85E89D"}},"  pages"),e("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},": "),e("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},"write")]),t(`
`),e("span",{class:"line"},[e("span",{style:{"--shiki-light":"#22863A","--shiki-dark":"#85E89D"}},"  id-token"),e("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},": "),e("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},"write")])])]),e("button",{class:"collapse"})],-1),e("p",null,[t("尤其要注意 permissions 下的 contents 要为 "),e("code",null,"write"),t(" 才能新建分支")],-1),e("p",null,[t("在 GitHub Actions 构建并推送完成后, 还需要去仓库的 "),e("code",null,"Settings"),t(" -> "),e("code",null,"Pages"),t(" -> "),e("code",null,"Build and deployment"),t(" -> "),e("code",null,"Source"),t(" 里改成 "),e("code",null,"Deploy from a branch"),t(" , 并在下方的 "),e("code",null,"Branch"),t(" 里面选择 "),e("code",null,"gh-pages"),t(" 分支, 文件夹默认 "),e("code",null,"/(root)")],-1),e("p",null,"走到这一步, 博客才算是搭建完成",-1),e("h2",{id:"布局覆盖",tabindex:"-1"},[t("布局覆盖 "),e("a",{class:"header-anchor",href:"#布局覆盖","aria-label":'Permalink to "布局覆盖"'},"​")],-1),e("p",null,[t("当前主题的404界面过于单调, 想着不如美化一下, 我就动手修改了 "),e("code",null,"/pages"),t(" 目录下的 "),e("code",null,"404.md"),t(" 文件")],-1),e("p",null,[t("不料, 所有的修改均不生效, 随后我把 "),e("code",null,"layout: 404"),t(" 注释之后, 却被识别成了一篇文章, 而不是 404 界面")],-1),e("p",null,[t("在询问了一下 "),e("s",null,"开发者"),t(" 好群友后, 我得知应该修改 "),e("code",null,"/layouts"),t(" 下的 "),e("code",null,"404.vue"),t(" 文件, 使其替代主题的布局")],-1),e("p",null,[e("code",null,"404.vue"),t(" 的示例文件可在 "),e("a",{href:"https://valaxy.site/themes/gallery",target:"_blank",rel:"noreferrer"},"valaxy 主题橱窗"),t(" 里找到")],-1),e("p",null,[e("a",{href:"https://github.com/YunYouJun/valaxy/blob/main/packages/valaxy-theme-yun/layouts/404.vue",target:"_blank",rel:"noreferrer"},"点我直达")],-1),e("h2",{id:"其他",tabindex:"-1"},[t("其他 "),e("a",{class:"header-anchor",href:"#其他","aria-label":'Permalink to "其他"'},"​")],-1),e("p",null,[t("没啥其他的了, 也就写 KaTeX 公式的时候发现不能两个"),e("code",null,"{"),t(" 或者 "),e("code",null,"}"),t(" 一起写, 中间要有空格, 不然会报错")],-1)])]),"main-header":a(()=>[l(s.$slots,"main-header")]),"main-header-after":a(()=>[l(s.$slots,"main-header-after")]),"main-nav":a(()=>[l(s.$slots,"main-nav")]),"main-content":a(()=>[l(s.$slots,"main-content")]),"main-content-after":a(()=>[l(s.$slots,"main-content-after")]),"main-nav-before":a(()=>[l(s.$slots,"main-nav-before")]),"main-nav-after":a(()=>[l(s.$slots,"main-nav-after")]),comment:a(()=>[l(s.$slots,"comment")]),footer:a(()=>[l(s.$slots,"footer")]),aside:a(()=>[l(s.$slots,"aside")]),"aside-custom":a(()=>[l(s.$slots,"aside-custom")]),default:a(()=>[l(s.$slots,"default")]),_:3},8,["frontmatter"])}}};export{G as default};
