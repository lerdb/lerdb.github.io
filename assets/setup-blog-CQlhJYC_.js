import{_ as c}from"./ValaxyMain.vue_vue_type_style_index_0_lang-DOUBs2ls.js";import{a as u,p as r,o as p,c as m,w as s,f as g,r as i,g as t,h as e}from"./app-294BSyLT.js";import"./YunFooter.vue_vue_type_script_setup_true_lang-T-P2rPQq.js";import"./YunCard.vue_vue_type_script_setup_true_lang-D8VlCbcZ.js";import"./YunPageHeader.vue_vue_type_script_setup_true_lang-DxtQoO5y.js";import"./index-C7yU5XnD.js";const k=t("p",null,"这篇博客用来记录一下我在用 valaxy 和 GitHub Pages 搭建博客时踩过的坑",-1),b=t("h2",{id:"github-actions-权限",tabindex:"-1"},[e("GitHub Actions 权限 "),t("a",{class:"header-anchor",href:"#github-actions-权限","aria-label":'Permalink to "GitHub Actions 权限"'},"​")],-1),f=t("p",null,"在第一次提交后触发了 GitHub Actions, 但是 GitHub Actions 并没有新建 gh-pages 分支, 需要手动给 GitHub Actions 加上权限才行",-1),_=t("div",{class:"language-yml vp-adaptive-theme"},[t("button",{title:"Copy Code",class:"copy"}),t("span",{class:"lang"},"yml"),t("pre",{class:"shiki shiki-themes github-light github-dark has-highlighted vp-code"},[t("code",{"v-pre":""},[t("span",{class:"line"},[t("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"# Sets permissions of the GITHUB_TOKEN to allow deployment to GitHub Pages")]),e(`
`),t("span",{class:"line"},[t("span",{style:{"--shiki-light":"#22863A","--shiki-dark":"#85E89D"}},"permissions"),t("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},":")]),e(`
`),t("span",{class:"line highlighted warning"},[t("span",{style:{"--shiki-light":"#22863A","--shiki-dark":"#85E89D"}},"  contents"),t("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},": "),t("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},"write")]),e(`
`),t("span",{class:"line"},[t("span",{style:{"--shiki-light":"#22863A","--shiki-dark":"#85E89D"}},"  pages"),t("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},": "),t("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},"write")]),e(`
`),t("span",{class:"line"},[t("span",{style:{"--shiki-light":"#22863A","--shiki-dark":"#85E89D"}},"  id-token"),t("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},": "),t("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},"write")])])]),t("button",{class:"collapse"})],-1),y=t("p",null,[e("尤其要注意 permissions 下的 contents 要为 "),t("code",null,"write"),e(" 才能新建分支")],-1),v=t("p",null,[e("在 GitHub Actions 构建并推送完成后, 还需要去仓库的 "),t("code",null,"Settings"),e(" -> "),t("code",null,"Pages"),e(" -> "),t("code",null,"Build and deployment"),e(" -> "),t("code",null,"Source"),e(" 里改成 "),t("code",null,"Deploy from a branch"),e(" , 并在下方的 "),t("code",null,"Branch"),e(" 里面选择 "),t("code",null,"gh-pages"),e(" 分支, 文件夹默认 "),t("code",null,"/(root)")],-1),E=t("p",null,"走到这一步, 博客才算是搭建完成",-1),$=t("h2",{id:"布局覆盖",tabindex:"-1"},[e("布局覆盖 "),t("a",{class:"header-anchor",href:"#布局覆盖","aria-label":'Permalink to "布局覆盖"'},"​")],-1),A=t("p",null,[e("当前主题的404界面过于单调, 想着不如美化一下, 我就动手修改了 "),t("code",null,"/pages"),e(" 目录下的 "),t("code",null,"404.md"),e(" 文件")],-1),B=t("p",null,[e("不料, 所有的修改均不生效, 随后我把 "),t("code",null,"layout: 404"),e(" 注释之后, 却被识别成了一篇文章, 而不是 404 界面")],-1),G=t("p",null,[e("在询问了一下 "),t("s",null,"开发者"),e(" 好群友后, 我得知应该修改 "),t("code",null,"/layouts"),e(" 下的 "),t("code",null,"404.vue"),e(" 文件, 使其替代主题的布局")],-1),H=t("p",null,[t("code",null,"404.vue"),e(" 的示例文件可在 "),t("a",{href:"https://valaxy.site/themes/gallery",target:"_blank",rel:"noreferrer"},"valaxy 主题橱窗"),e(" 里找到")],-1),w=t("p",null,[t("a",{href:"https://github.com/YunYouJun/valaxy/blob/main/packages/valaxy-theme-yun/layouts/404.vue",target:"_blank",rel:"noreferrer"},"点我直达")],-1),F=t("h2",{id:"其他",tabindex:"-1"},[e("其他 "),t("a",{class:"header-anchor",href:"#其他","aria-label":'Permalink to "其他"'},"​")],-1),T=t("p",null,[e("没啥其他的了, 也就写 KaTeX 公式的时候发现不能两个"),t("code",null,"{"),e(" 或者 "),t("code",null,"}"),e(" 一起写, 中间要有空格, 不然会报错")],-1),J={__name:"setup-blog",setup(D,{expose:h}){const l=JSON.parse('{"title":"搭建博客踩的坑","description":"","frontmatter":{"title":"搭建博客踩的坑","date":"2024-05-02T17:00:00.000Z","updated":"2024-05-05T17:00:00.000Z","categories":"博客记录","tags":["Blog","踩坑"]},"headers":[{"level":2,"title":"GitHub Actions 权限","slug":"github-actions-权限","link":"#github-actions-权限","children":[]},{"level":2,"title":"布局覆盖","slug":"布局覆盖","link":"#布局覆盖","children":[]},{"level":2,"title":"其他","slug":"其他","link":"#其他","children":[]}],"relativePath":"pages/posts/setup-blog.md","path":"/home/runner/work/lerdb.github.io/lerdb.github.io/pages/posts/setup-blog.md","lastUpdated":1716551852000}'),o=u(),n=l.frontmatter||{};return o.meta.frontmatter=Object.assign(o.meta.frontmatter||{},l.frontmatter||{}),r("pageData",l),r("valaxy:frontmatter",n),globalThis.$frontmatter=n,h({frontmatter:{title:"搭建博客踩的坑",date:"2024-05-02T17:00:00.000Z",updated:"2024-05-05T17:00:00.000Z",categories:"博客记录",tags:["Blog","踩坑"]}}),(a,C)=>{const d=c;return p(),m(d,{frontmatter:g(n)},{"main-content-md":s(()=>[k,b,f,_,y,v,E,$,A,B,G,H,w,F,T]),"main-header":s(()=>[i(a.$slots,"main-header")]),"main-header-after":s(()=>[i(a.$slots,"main-header-after")]),"main-nav":s(()=>[i(a.$slots,"main-nav")]),"main-content":s(()=>[i(a.$slots,"main-content")]),"main-content-after":s(()=>[i(a.$slots,"main-content-after")]),"main-nav-before":s(()=>[i(a.$slots,"main-nav-before")]),"main-nav-after":s(()=>[i(a.$slots,"main-nav-after")]),comment:s(()=>[i(a.$slots,"comment")]),footer:s(()=>[i(a.$slots,"footer")]),aside:s(()=>[i(a.$slots,"aside")]),"aside-custom":s(()=>[i(a.$slots,"aside-custom")]),default:s(()=>[i(a.$slots,"default")]),_:3},8,["frontmatter"])}}};export{J as default};
